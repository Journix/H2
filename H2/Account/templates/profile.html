{% extends "content_base.html" %}

{% block content_base %}
<div class="row col-md-12 col-sm-12 xui-content-row">
 Profile 界面
<form class="form-horizontal">
  <div class="form-group">
    <label for="nickname" class="col-sm-2 control-label">昵称</label>
    <div class="col-sm-10">
      <input  id="nickname" type="text" class="form-control" placeholder="昵称">
    </div>
  </div>
  <div class="form-group">
    <label for="signature" class="col-sm-2 control-label">个人签名</label>
    <div class="col-sm-10">
      <input  id="signature" type="text" class="form-control" placeholder="个人签名">
    </div>
  </div>
  <div class="form-group">
    <label for="phone" class="col-sm-2 control-label">手机</label>
    <div class="col-sm-10">
      <input id="phone" type="text" class="form-control"  placeholder="">
    </div>
  </div>
  <div class="form-group">
    <label for="remark" class="col-sm-2 control-label">备注</label>
    <div class="col-sm-10">
     <textarea id="remark" class="form-control" rows="3"></textarea>
    </div>
  </div>
</form>

<div class="form-group">
    <ul class="col-sm-offset-2 col-sm-10">
        <a class="btn btn-default xa-cancel" href={% url 'blogs' %}>取消</a>
        <a class="btn btn-primary xa-save">保存</a>
    </ul>
</div>
{% endblock%}


{% block js %}

<script type="text/javascript">
//注册
$('.xa-save').click(function() {
    var blog_title = $('#blog_title').val();
    var blog_content = $('#blog_content').val();
    $.ajax({
        url:'/blogs/blog/',
        type:'post',
        data:{
            '_method':'put',
            'blog_title':blog_title,
            'blog_content':blog_content
        },
        success:function(resp){
            console.log(resp);
            if(resp.code==200){
                console.log('创建博客成功！');
                var data = resp.data;
                if(data.url){
                    window.location.href=data.url;
                }
            }else{
                console.log('创建博客失败！');
            }
        },
        error:function(resp){
            console.log(resp);
            console.log('连接服务器失败，请重试！');

        }
    });
});
</script>

{% endblock %}